jQuery(document).ready(function(a){function g(b){var c=a(b).data("id");return y(b),e[c].price_requested=0,e[c].summary_shown=0,a(b).find(".ezfc-summary-wrapper").fadeOut(),1==e[c].price_show_request?(q(c,!1),!1):(o(b),void A(b))}function h(b,c){a(".ezfc-loading").show();var d=a(b).find(".ezfc-submit-icon");d.fadeIn();var f=a(b).find("input[type='submit']");f.attr("disabled","disabled"),a(b).find(".ezfc-custom-hidden").each(function(){a(this).find("input, :selected").val("__HIDDEN__").addClass("ezfc-has-hidden-placeholder");var b=a(this).find(".ezfc-element-radio:not(:has(:radio:checked))");b.length&&a(b).first().find("input").prop("checked",!0)});var g=a(b).data("id"),h="id="+g+"&"+a(b).serialize();0==e[g].price_requested&&(h+="&price_requested=1"),0==e[g].summary_shown&&(h+="&summary=1"),-1!=c&&(h+="&step="+c),a.ajax({type:"post",url:ezfc_vars.ajaxurl,data:{action:"ezfc_frontend",data:h},success:function(h){if(a(".ezfc-loading").hide(),f.removeAttr("disabled"),d.fadeOut(),"1"==ezfc_vars.debug_mode&&console.log(h),h=a.parseJSON(h),!h)return a(b).find(".ezfc-message").text("Something went wrong. :("),"undefined"!=typeof Recaptcha&&Recaptcha.reload(),t(b,!0),!1;if(h.error){if(t(b,!0),h.id){var i=!0,j="#ezfc_element-"+h.id,k=a(j).find(".ezfc-element").first(),l=a(b).find(".ezfc-step-active").length>0?!0:!1;if(l){var m=parseInt(a(j).parents(".ezfc-step").data("step"));m!=c&&-1!=c&&(i=!1,v(b,c+1))}if(i){k.length||(k=a(j));a(k).opentip(h.error,{delay:800,hideDelay:.1,hideTriggers:["closeButton","target"],removeElementsOnHide:!0,showOn:null,target:j,tipJoint:"middle right"}).show(),w(j)}}else{var o=a(b).parents(".ezfc-wrapper").find(".ezfc-message");o.text(h.error).fadeIn().delay(7500).fadeOut()}return"undefined"!=typeof Recaptcha&&Recaptcha.reload(),!1}if(h.step_valid)return t(b),v(b,c+1),!1;if(h.summary)return a(b).find(".ezfc-summary-wrapper").fadeIn().find(".ezfc-summary").html(h.summary),e[g].summary_shown=1,t(b),!1;if("undefined"!=typeof Recaptcha&&Recaptcha.reload(),h.paypal)f.attr("disabled","disabled"),window.location.href=h.paypal;else{if(h.price_requested||0===h.price_requested)return void q(g,!0,h.price_requested);if(e[g].reset_after_submission&&1==e[g].reset_after_submission)return u(b),void a(".ezfc-success-text[data-id='"+g+"']").fadeIn().delay(7500).fadeOut();e[g].hide_all_forms&&1==e[g].hide_all_forms?a(".ezfc-form, .ezfc-required-notification").fadeOut():(a(b).fadeOut(),a(b).find(".ezfc-required-notification").fadeOut()),a(".ezfc-success-text[data-id='"+g+"']").fadeIn(),e[g]&&e[g].redirect_url&&e[g].redirect_url.length>0&&(window.location.href=e[g].redirect_url)}}})}function i(c,d,e,f){var g=e.data("value_external");if(g&&a(g).length>0){var h;h=a(g).is("input[type='radio']")?a(g).find(":checked").val():a(g).is("input, input[type='text'], textarea")?a(g).val():a(g).is("select")?a(g).find(":selected").text():a(g).text(),"input"==f||"numbers"==f||"subtotal"==f?e.find("input").val(h):"dropdown"==f?(e.find(":selected").removeAttr("selected"),e.find("option[value='"+h+"']").attr("selected","selected")):"radio"==f?(e.find(":checked").removeAttr("checked"),e.find("input[value='"+h+"']").attr("checked","checked")):"checkbox"==f&&(e.find(":checked").removeAttr("checked"),e.find("input[value='"+h+"']").attr("checked","checked")),b[d][g]||(b[d][g]=1,a(g).on("change keyup",function(){o(a(c))}))}}function j(b,c,d,f){var g=d.data("conditional_action"),h=d.data("conditional_operator"),i=d.data("conditional_target"),j=d.data("conditional_values"),k=d.data("conditional_target_value"),l=d.data("conditional_notoggle"),m=d.data("conditional_redirects");if(g&&0!=g){var n=g.toString().split(","),o=h.toString().split(","),p=i.toString().split(","),q=j.toString().split(","),r=k.toString().split(","),s=l.toString().split(","),t=m.toString().split(","),u=parseFloat(d.val());if("input"==f||"numbers"==f||"subtotal"==f)u=parseFloat(d.find("input").val());else if("dropdown"==f)u=parseFloat(d.find(":selected").data("value"));else if("radio"==f)u=parseFloat(d.find(":checked").data("value"));else if("checkbox"==f)u=0,d.find(":checked").each(function(b,c){u+=parseFloat(a(c).data("value"))});else if("daterange"==f){var v=[a(d).find(".ezfc-element-daterange-from").datepicker("getDate"),a(d).find(".ezfc-element-daterange-to").datepicker("getDate")];u=D(v[0],v[1])}a.each(n,function(g,h){var i;if(i="submit_button"==p[g]?a(b).find(".ezfc-submit"):a("#ezfc_element-"+p[g]),!(i.length<1&&t.length<1)){var j;j="input"==f?q[g]:parseFloat(q[g]);var k;if("input"==f)k=j.toLowerCase()==i.val().toLowerCase();else{var l=q[g].split(":");switch(o[g]){case"gr":k=u>j;break;case"gre":k=u>=j;break;case"less":k=j>u;break;case"lesse":k=j>=u;break;case"equals":k=u==j;break;case"between":k=l.length<2?!1:u>=l[0]&&u<=l[1];break;case"not":k=l.length<2?u!=j:u<l[0]&&u>l[1];break;case"hidden":k=d.hasClass("ezfc-custom-hidden");break;case"visible":k=!d.hasClass("ezfc-custom-hidden");break;case"mod0":k=u>0&&u%j==0;break;case"mod1":k=u>0&&u%j!=0;break;case"bit_and":k=u&j;break;case"bit_or":k=u|j;break;default:k=!1}}var m,n,v=s[g],w=i.data("element");if("group"==w&&i.push(a(i).find("> .ezfc-custom-element")),"set"==h&&k)"input"==w||"numbers"==w||"subtotal"==w||"set"==w?i.find("input").val(r[g]):"dropdown"==w?(i.find(":selected").removeAttr("selected"),i.find("option[data-value='"+r[g]+"']").prop("selected","selected")):"radio"==w?(i.find(":checked").removeAttr("checked"),i.find("input[data-value='"+r[g]+"']").prop("checked",!0)):"checkbox"==w?i.find("input[data-value='"+r[g]+"']").prop("checked",!0):"checkbox"==w&&i.text(r[g]);else if("activate"==h)k?"submit"==w?i.prop("disabled",!1):i.data("calculate_enabled",1):1!=v&&("submit"==w?i.prop("disabled",!0):i.data("calculate_enabled",0));else if("deactivate"==h)k?"submit"==w?i.prop("disabled",!0):i.data("calculate_enabled",0):1!=v&&("submit"==w&&i.prop("disabled",!1),i.data("calculate_enabled",1));else if("redirect"==h&&k){var x=a(b).parents(".ezfc-wrapper").find(".ezfc-message");x.text(e[c].redirect_text).fadeIn(),a(b).fadeOut(),setTimeout(function(){window.location.href=t[g]},1e3*e[c].redirect_timer)}else{if("show"==h)m="removeClass",n="addClass";else{if("hide"!=h)return;m="addClass",n="removeClass"}k?(i[m]("ezfc-hidden ezfc-custom-hidden"),"show"==h?i.addClass("ezfc-fade-in"):a(i).fadeOut(500,function(){i.removeClass("ezfc-fade-in"),1==e[c].clear_selected_values_hidden&&z()})):1!=v&&(i[n]("ezfc-hidden ezfc-custom-hidden"),"show"==h?i.removeClass("ezfc-fade-in"):i.addClass("ezfc-fade-in"))}}})}}function k(b,c,d,e,f){var g=d.data("calculate_enabled"),h=d.data("calculate_operator")||0,i=d.data("calculate_target")||0,j=d.data("calculate_values")||0,k=d.data("overwrite_price"),l=d.find(".ezfc-element-numbers, .ezfc-element-input-hidden, .ezfc-element-subtotal, .ezfc-element-daterange-container, .ezfc-element-set, .ezfc-element-extension, :selected, :checked, .ezfc-element-custom-calculation");return a(l).each(function(b,c){var l={};if(a(this).data("settings")&&(l=a(this).data("settings")),a(d).hasClass("ezfc-custom-hidden")&&(!l.hasOwnProperty("calculate_when_hidden")||0==l.calculate_when_hidden))return void C("calculate",d,"Skipped as element is hidden and calculate_when_hidden is not enabled.");if(!(g&&0!=g||i||j||"subtotal"==e||"hidden"==e||"extension"==e))return void C("calculate",d,"No target or values were found to calculate with. Subtotals and hidden elements are skipped.");if(!g||0==g)return void C("calculate",d,"Calculation is disabled.");var m=parseFloat(a(c).data("factor")),n=a(c).val(),o=parseFloat(n),p=o/100,q=n.indexOf("%")>=0;(!o||isNaN(o))&&(o=0),m&&!isNaN(m)||0===m||(m=1);var r=o;switch(e){case"numbers":case"hidden":case"extension":case"set":r=o*m;break;case"dropdown":case"radio":case"checkbox":r=parseFloat(a(c).data("value")),isNaN(r)&&(r=0);break;case"subtotal":r=f;break;case"daterange":var s=[a(c).find(".ezfc-element-daterange-from").datepicker("getDate"),a(c).find(".ezfc-element-daterange-to").datepicker("getDate")];r=D(s[0],s[1])*m;break;case"custom_calculation":var t=a(d).find(".ezfc-element-custom-calculation").data("function");if(r=parseFloat(window[t](f)),a(d).find(".ezfc-element-custom-calculation-input").val(r),2==ezfc_vars.debug_mode){var u=a(d).find(".ezfc-element-custom-calculation script").text();C("custom_calculation",d,"custom_calculation:\n"+u)}}q&&(r=f*p);var v=h.toString().split(",");if(calc_target_elements=i.toString().split(","),calc_custom_values=j.toString().split(","),v.length>0&&0!=v[0]&&a.each(v,function(b,e){if(!e)return void C("calculate",d,"#"+b+": No operator found here.");var g=a("#ezfc_element-"+calc_target_elements[b]);if(g.hasClass("ezfc-custom-hidden"))return void C("calculate",d,"#"+b+": Skipping this element as it is conditionally hidden.");var i,h=calc_custom_values[b];if(g.length>0){var j=g.data("element");if("numbers"==j||"subtotal"==j||"hidden"==j){var l=g.find("input"),m=parseFloat(l.data("factor"));(!m||isNaN(m))&&(m=1),i=parseFloat(l.val())*m}else if("dropdown"==j)i=parseFloat(g.find(":selected").data("value"));else if("radio"==j)i=parseFloat(g.find(":checked").data("value"));else if("checkbox"==j)i=0,g.find(":checked").each(function(b,c){i+=parseFloat(a(c).data("value"))});else if("daterange"==j){var n=[a(g).find(".ezfc-element-daterange-from").datepicker("getDate"),a(g).find(".ezfc-element-daterange-to").datepicker("getDate")],m=parseFloat(a(g).find(".ezfc-element-daterange-container").data("factor"));(!m||isNaN(m))&&(m=1),i=D(n[0],n[1])*m}else if("custom_calculation"==j){var p=a(g).find(".ezfc-element-custom-calculation").data("function");i=parseFloat(window[p](h))}}else"0"!=h&&(i=parseFloat(h));switch((!i||isNaN(i))&&(i=0),e){case"add":r+=i;break;case"subtract":r-=i;break;case"multiply":r*=i;break;case"divide":if(0==i)return void C("calculate",d,"#"+b+": Division by 0.");r/=i,"1"==a(c).data("calculate_before")&&(k=1,r=i/o);break;case"equals":r=i;break;case"power":r=Math.pow(r,i);break;case"ceil":r=Math.ceil(r);break;case"floor":r=Math.floor(r);break;case"round":r=Math.round(r);break;case"subtotal":r=f;break;case"log":if(0==i)return;r=Math.log(i);break;case"log2":if(0==i)return;r=Math.log2(i);break;case"log10":if(0==i)return;r=Math.log10(i)}C("calculate",d,"#"+b+": operator = "+e+"\ntarget_value = "+i+"\ncalc_value = "+h+"\naddPrice = "+r)}),C("calculate",d,"\nprice = "+f+"\naddPrice = "+r+"\nfactor = "+m),"1"==k?f=r:"1"==g&&(f+=r),"subtotal"==e){var w=1==k?f:r,x=2;a(c).data("settings")&&(l=a(c).data("settings"),x=l.precision);var y=w.toFixed(x);d.find("input").val(y)}}),f}function l(b,c,d,e,f){var g=d.data("discount_range_min"),h=d.data("discount_range_max"),i=d.data("discount_operator"),j=d.data("discount_values");if(j||0==j){var k=g.toString().split(","),l=h.toString().split(","),m=i.toString().split(","),n=j.toString().split(","),o=0,p=1;if("input"==e||"numbers"==e||"subtotal"==e||"hidden"==e||"extension"==e){var q=d.find("input");p=parseFloat(q.data("factor")),p&&!isNaN(p)||0===p||(p=1),o=parseFloat(q.val())}else if("dropdown"==e)o=parseFloat(d.find(":selected").data("value"));else if("radio"==e)o=parseFloat(d.find(":checked").data("value"));else if("checkbox"==e)o=0,d.find(":checked").each(function(b,c){o+=parseFloat(a(c).data("value"))});else if("daterange"==e){var r=[d.find(".ezfc-element-daterange-from").datepicker("getDate"),d.find(".ezfc-element-daterange-to").datepicker("getDate")];o=D(r[0],r[1])}a.each(m,function(b,c){k[b]||0===k[b]||(k[b]=Number.NEGATIVE_INFINITY),l[b]||0===l[b]||(l[b]=Number.POSITIVE_INFINITY);var g;if(o>=parseFloat(k[b])&&o<=parseFloat(l[b])){var i,h=parseFloat(n[b]);switch(c){case"add":i=h,g=i,f+=g;break;case"subtract":i=h,g=i,f-=g;break;case"percent_add":i=o*p*(h/100),g=f+i,f=g;break;case"percent_sub":i=o*p*(h/100),g=f-i,f=g;break;case"equals":i=h,g=i,f=g}"subtotal"!=e||isNaN(g)||a(d).find("input").val(g.toFixed(2)),C("discount",d,"discount = "+i+"\nprice after discount = "+f)}})}return f}function m(b,c,d,e,f){var g=d.data("set_operator"),h=d.data("set_elements");if(h){var j,i=h.toString().split(",");a.each(i,function(b,c){var d=a("#ezfc_element-"+c);if(d){var e=a(d).data("element");if("input"==e||"numbers"==e||"subtotal"==e||"hidden"==e||"extension"==e||"set"==e){var f=d.find("input");factor=parseFloat(f.data("factor")),factor&&!isNaN(factor)||0===factor||(factor=1),el_value=parseFloat(f.val())}else if("dropdown"==e)el_value=parseFloat(d.find(":selected").data("value"));else if("radio"==e)el_value=parseFloat(d.find(":checked").data("value"));else if("checkbox"==e)el_value=0,d.find(":checked").each(function(b,c){el_value+=parseFloat(a(c).data("value"))});else if("daterange"==e){var h=[d.find(".ezfc-element-daterange-from").datepicker("getDate"),d.find(".ezfc-element-daterange-to").datepicker("getDate")];el_value=D(h[0],h[1])}if(0==b)return void(j=el_value);switch(g){case"min":el_value<j&&(j=el_value);break;case"max":el_value>j&&(j=el_value);break;case"avg":case"sum":j+=el_value;break;case"dif":j-=el_value;break;case"prod":j*=el_value;break;case"quot":0!=el_value&&(j/=el_value)}}}),"avg"==g&&(j/=i.length),d.find("input").val(j)}}function n(b){var c=0;return B(),a(b).find(".ezfc-custom-element").each(function(d,f){var g=a(b).data("id"),h=a(f),n=a(f).data("element");a(this).hasClass("ezfc-hidden")&&"subtotal"!=n&&"hidden"!=n&&1==e[g].calculate_old||(i(b,g,h,n),j(b,g,h,n),a(this).hasClass("ezfc-hidden")&&"subtotal"!=n&&"hidden"!=n||(m(b,g,h,n),c=k(b,g,h,n,c),c=l(b,g,h,n,c),j(b,g,h,n)))}),c}function o(b,d){var f=a(b).data("id");return d&&0===d||(price=n(a(b))),r(a(b)),1==e[f].price_show_request&&0==e[f].price_requested?void q(f,!1):("undefined"==typeof c[f]&&(c[f]=0),void(c[f]!=price&&(0!=e[f].counter_duration?a(b).find(".ezfc-price-value").countTo({from:c[f],to:price,speed:e[f].counter_duration,refreshInterval:e[f].counter_interval,formatter:function(a,b){return p(f,a)}}):a(b).find(".ezfc-price-value").text(p(f,price)),c[f]=price)))}function p(a,b,c,f){var g=d;c||e[a].currency;e[a].price_format&&e[a].price_format.length>0&&(g=e[a].price_format),f&&f.length>0&&(g=f);var i=numeral(b).format(g);return i}function q(b,d,f){var g=a(".ezfc-form[data-id='"+b+"']");d?(c[b]=0,e[b].price_requested=1,o(g,f),A(g)):(e[b].price_requested=0,a(g).find(".ezfc-price-value").text(e[b].price_show_request_before),a(g).find(".ezfc-submit").val(e[b].price_show_request_text))}function r(b){a(b).find("[data-element='subtotal']").each(function(c,d){var h,i,e=a(d).find(".ezfc-element-subtotal"),f=e.val(),g=null;e.data("settings")&&(h=e.data("settings"),g=h.price_format),i=p(a(b).data("id"),f,null,g),a(d).find(".ezfc-text").text(i)})}function s(){a(".ezfc-fixed-price").each(function(){var b=a(this).offset(),c=a(this).data("id"),d=a(".ezfc-form[data-id='"+c+"']"),f=d.outerHeight(),g=d.offset(),h=a(window).scrollTop(),i=parseFloat(e[c].price_position_scroll_top),j=g.top-h-i;0>j&&j>-f&&a(this).offset({top:h+i}),j>0&&b.top>g.top&&a(this).offset({top:g.top})})}function t(b,c){a(b).find(".ezfc-custom-hidden").each(function(){a.each(a(this).find("input, :selected"),function(b,c){a(this).val(a(this).data("index")).removeAttr("disabled")})}),A(b,c)}function u(b){b.find(".ezfc-custom-element").each(function(){var b=a(this).data("element"),c=a(this).find("[data-initvalue]").data("initvalue");switch(b){case"checkbox":a(this).find("input").each(function(){var b=a(this).data("initvalue");1==b?a(this).prop("checked",!0):a(this).removeAttr("checked")});break;case"dropdown":a(this).find("option").removeAttr("selected"),a(this).find("option[data-index='"+c+"']").prop("selected",!0);break;case"radio":a(this).find("input").removeAttr("checked"),a(this).find("input[data-initvalue]").prop("checked",!0);break;default:a(this).find("input").val(c)}}),g(b)}function v(b,c,d){var e=parseInt(b.find(".ezfc-step-active").data("step")),f=b.find("[data-step='"+e+"']");b.data("id");if(1==d){var i=a(b).find(".ezfc-submit-icon");return i.fadeIn(),h(b,c-1),void a(".ezfc-has-hidden-placeholder").val("").removeClass("ezfc-has-hidden-placeholder")}return f.fadeOut(200,function(){var d=b.find("[data-step='"+c+"']");d.fadeIn(200).addClass("ezfc-step-active"),a(this).removeClass("ezfc-step-active"),1==ezfc_vars.auto_scroll_steps&&w(d,200)}),!1}function w(b,c){var d=a(b).offset().top;a("html, body").animate({scrollTop:d-c})}function x(b,c,d){b||(b=a("#ezfc_element-"+c));var e=b.data("element"),f=b.val(),g=parseFloat(f),h=g/100,i=f?f.indexOf("%")>=0:0;(!g||isNaN(g))&&(g=0);var j=g;switch(e){case"subtotal":case"numbers":case"hidden":case"extension":case"set":var k=b.find("input"),l=parseFloat(k.data("factor"));l&&!isNaN(l)||0===l||(l=1),g=parseFloat(k.val()),j=g*l;break;case"dropdown":case"radio":case"checkbox":b.find(":selected, :checked").each(function(){j+=parseFloat(a(this).data("value"))});break;case"daterange":var m=[b.find(".ezfc-element-daterange-from").datepicker("getDate"),b.find(".ezfc-element-daterange-to").datepicker("getDate")],l=parseFloat(b.find(".ezfc-element-daterange-from").data("factor"));l&&!isNaN(l)||0===l||(l=1),j=D(m[0],m[1])*l;break;case"custom_calculation":b.find(".ezfc-element-custom-calculation").data("function");j=parseFloat(b.find(".ezfc-element-custom-calculation-input").val())}return i&&(j=price*h),isNaN(j)&&(j=0),d?j:j?parseFloat(j):0}function y(b){var c=a(b).data("id");1==e[c].clear_selected_values_hidden&&a(b).find(".ezfc-custom-hidden").each(function(){a(this).find("input[type='text']").val(""),a(this).find(":checkbox, :radio").prop("checked",!1)})}function z(a){var b=a.data("element");"input"==b||"numbers"==b||"subtotal"==b?cond_target.find("input").val(""):"dropdown"==b?cond_target.find(":selected").removeAttr("selected"):("radio"==b||"checkbox"==b)&&cond_target.find(":checked").removeAttr("checked")}function A(b,c){var d=a(b).data("id"),f=e[d].submit_text["default"];if(1==e[d].price_show_request&&c)return q(d,!1),!1;if(1==e[d].summary_enabled&&0==e[d].summary_shown)f=e[d].submit_text.summary;else if(1==e[d].use_paypal)f=e[d].submit_text.paypal;else if(1==e[d].use_woocommerce)f=e[d].submit_text.woocommerce;else{var g=!1,h=a(b).find(".ezfc-element-wrapper-payment");h.length>0&&(g="paypal"==a(h).find(":checked").data("value")),f=g?e[d].submit_text.paypal:e[d].submit_text["default"]}a(b).find(".ezfc-submit").val(f)}function B(){a(".ezfc-debug-info").remove()}function C(b,c,d){2==ezfc_vars.debug_mode&&(console.log(d,c),a(c).append("<pre class='ezfc-debug-info ezfc-debug-type-"+b+"'>["+b+"]\n"+d+"</pre>"))}function D(a,b){return a&&b?(b-a)/1e3/60/60/24:0}ezfc_functions={get_value_from:function(a,b){return x(null,a,b)}};var b=[],c=[];numeral.language("ezfc",{delimiters:{decimal:ezfc_vars.price_format_dec_point,thousands:ezfc_vars.price_format_dec_thousand},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),numeral.language("ezfc");var d=ezfc_vars.price_format?ezfc_vars.price_format:"0,0[.]00";numeral.defaultFormat(d),a.datepicker.setDefaults(a.datepicker.regional[ezfc_vars.datepicker_language]),a(".ezfc-element-option-image").click(function(){if(a(this).hasClass("ezfc-element-radio-image")){var b=a(this).parents(".ezfc-element-wrapper-radio");b.find(".ezfc-selected").removeClass("ezfc-selected"),b.find(".ezfc-element-radio-input").prop("checked",!1).trigger("change"),a(this).siblings(".ezfc-element-radio-input").prop("checked",!0).trigger("change"),a(this).addClass("ezfc-selected")}else if(a(this).hasClass("ezfc-element-checkbox-image")){var c=a(this).siblings(".ezfc-element-checkbox-input");c.prop("checked")?(c.prop("checked",!1).trigger("change"),a(this).removeClass("ezfc-selected")):(c.prop("checked",!0).trigger("change"),a(this).addClass("ezfc-selected"))}});var e=[];a(".ezfc-form").each(function(c){var d=this,f=a(this).data("id");e[f]=a(this).data("vars"),"object"!=typeof e[f]&&(e[f]=a.parseJSON(a(this).data("vars"))),b[f]=[],1==e[f].price_show_request&&q(f,!1),a(this).find(".ezfc-element-datepicker").each(function(){var b={};a(this).data("settings")&&(b=a(this).data("settings")),a(this).datepicker({dateFormat:e[f].datepicker_format,minDate:b.minDate?b.minDate:"",maxDate:b.maxDate?b.maxDate:"",numberOfMonths:b.numberOfMonths?parseInt(b.numberOfMonths):1,showAnim:b.showAnim?b.showAnim:"fadeIn",showWeek:"1"==b.showWeek?b.showWeek:!1,firstDay:b.firstDay?b.firstDay:!1})}),a(this).find(".ezfc-element-timepicker").each(function(){var b={};a(this).data("settings")&&(b=a(this).data("settings")),a(this).timepicker({minTime:b.minTime?b.minTime:null,maxTime:b.maxTime?b.maxTime:null,step:b.step?b.step:30,timeFormat:b.format?b.format:e[f].timepicker_format})}),a(this).find(".ezfc-element-daterange").each(function(){var b=e[f].datepicker_format,c=a(this);a(this).hasClass("ezfc-element-daterange-from")?a(this).datepicker({dateFormat:b,minDate:a(this).data("mindate"),maxDate:a(this).data("maxdate"),onSelect:function(d){var e=a(this).data("mindays")||0,f=a.datepicker.parseDate(b,d);f.setDate(f.getDate()+e),c.siblings(".ezfc-element-daterange-to").datepicker("option","minDate",f),c.trigger("change")}}):a(this).datepicker({dateFormat:e[f].datepicker_format,minDate:a(this).data("mindate"),maxDate:a(this).data("maxdate"),onSelect:function(d){var e=a(this).data("mindays")||0,f=a.datepicker.parseDate(b,d);f.setDate(f.getDate()-e),c.siblings(".ezfc-element-daterange-from").datepicker("option","maxDate",f),c.trigger("change")}})}),a(this).find(".ezfc-element-colorpicker").each(function(){var b=a(this),c=b.parents(".ezfc-element").find(".ezfc-element-colorpicker-input"),d=b.colorpicker({container:b}).on("changeColor.colorpicker",function(a){b.css("background-color",a.color.toHex()),c.val(a.color.toHex())});a(c).on("click focus",function(){d.colorpicker("show")}).on("change",function(){d.colorpicker("setValue",a(this).val())})});var g=a(this).find(".ezfc-step");if(g.length>0){var h=g.last();a(this).find(".ezfc-summary-wrapper").appendTo(h),a(this).find(".ezfc-submit-wrapper").appendTo(h).addClass("ezfc-submit-step")}a(".ezfc-custom-element[data-group]").each(function(){var b=a(this).data("group"),c=a("#ezfc_element-"+b);c.length>0&&a(this).appendTo(c)}),o(a(this)),"2"==ezfc_vars.debug_mode&&(a(this).append("<button id='ezfc-show-all-elements'>Show/hide elements</button>"),a("#ezfc-show-all-elements").click(function(){return a(this).hasClass("ezfc-debug-visible")?(a(this).removeClass("ezfc-debug-visible"),a(d).find(".ezfc-tmp-visible").removeClass("ezfc-tmp-visible").hide()):(a(this).addClass("ezfc-debug-visible"),a(d).find(".ezfc-hidden").addClass("ezfc-tmp-visible").show().css("display","inline-block")),!1}))}),a(".ezfc-element-fileupload").each(function(b,c){var d=a(this).parents(".ezfc-element"),e=a(d).find(".ezfc-upload-button"),f=a(this).parents("form.ezfc-form"),g=f.find("input[name='id']").val(),h=f.find("input[name='ref_id']").val(),i={action:"ezfc_frontend_fileupload",data:"id="+g+"&ref_id="+h};a(this).fileupload({formData:i,dataType:"json",add:function(b,f){a(d).find(".ezfc-bar").css("width",0),a(d).find(".progress").addClass("active"),a(d).find(".ezfc-fileupload-message").text(""),e.click(function(){return""==a(c).val()?!1:(f.submit(),a(e).attr("disabled","disabled"),b.preventDefault(),!1)})},done:function(b,c){return c.result.error?(a(e).removeAttr("disabled"),a(d).find(".ezfc-fileupload-message").text(c.result.error),a(d).find(".ezfc-bar").css("width",0),!1):(a(this).attr("multiple")&&(a(this).val(""),a(e).removeAttr("disabled")),a(d).find(".progress").removeClass("active"),void a(d).find(".ezfc-fileupload-message").text(ezfc_vars.upload_success))},progressall:function(b,c){var e=parseInt(c.loaded/c.total*100,10);a(d).find(".ezfc-bar").css("width",e+"%")},replaceFileInput:!1,url:ezfc_vars.ajaxurl})}),a(".ezfc-overview").dialog({autoOpen:!1,modal:!0}),a(".ezfc-form input, .ezfc-form select").on("change keyup",function(){var b=a(this).parents(".ezfc-form");g(b)}),a(".ezfc-slider").each(function(b,c){var d=a(this),e=a(c).parents(".ezfc-element").find(".ezfc-slider-element");e.slider({min:d.data("min")||0,max:d.data("max")||100,step:d.data("stepsslider")||1,value:d.val()||0,slide:function(a,b){d.val(b.value)},stop:function(a,b){d.trigger("change")}}),d.hasClass("ezfc-pips")&&e.slider("pips",{rest:"label",step:d.data("stepspips")||1}),d.draggable()}),a(".ezfc-spinner").each(function(b,c){var d=a(this);d.spinner({min:d.data("min")||0,max:d.data("max")||100,step:d.data("stepsspinner")||1,change:function(){d.trigger("change")},spin:function(a,b){d.val(b.value),d.trigger("change")}})}),a(".ezfc-step-button").on("click",function(){var b=a(this).parents(".ezfc-form"),c=parseInt(b.find(".ezfc-step-active").data("step")),d=c+(a(this).hasClass("ezfc-step-next")?1:-1),e=a(this).hasClass("ezfc-step-next")?1:0;return v(b,d,e),!1}),a(".ezfc-element-wrapper-payment input").on("change",function(){var b=a(this).parents(".ezfc-form").data("id");if(1!=e[b].price_show_request&&!e[b].summary_enabled){var c="paypal"==a(this).data("value"),d=c?e[b].submit_text.paypal:e[b].submit_text["default"];a(this).parents(".ezfc-form").find(".ezfc-element-submit").val(d)}}),a(window).scroll(function(){s()}),s(),a(".ezfc-form").submit(function(b){var c=a(this);return h(c,-1),b.preventDefault(),!1}),a(".ezfc-reset").click(function(){var b=a(this).parents(".ezfc-form");return u(b),!1})}),ezfc_functions={};