!function(e){function t(e,t){return e.toFixed(t.decimals)}e.fn.countTo=function(t){return t=t||{},e(this).each(function(){function a(){l++,i(d+=c),"function"==typeof n.onUpdate&&n.onUpdate.call(s,d),l>=r&&(o.removeData("countTo"),clearInterval(f.interval),d=n.to,"function"==typeof n.onComplete&&n.onComplete.call(s,d))}function i(e){var t=n.formatter.call(s,e,n);o.text(t)}var n=e.extend({},e.fn.countTo.defaults,{from:e(this).data("from"),to:e(this).data("to"),speed:e(this).data("speed"),refreshInterval:e(this).data("refresh-interval"),decimals:e(this).data("decimals")},t),r=Math.ceil(n.speed/n.refreshInterval),c=(n.to-n.from)/r,s=this,o=e(this),l=0,d=n.from,f=o.data("countTo")||{};o.data("countTo",f),f.interval&&clearInterval(f.interval),f.interval=setInterval(a,n.refreshInterval),i(d)})},e.fn.countTo.defaults={from:0,to:0,speed:1e3,refreshInterval:100,decimals:0,formatter:t,onUpdate:null,onComplete:null}}(jQuery),function(){function e(e){this._value=e}function t(e,t,a,i){var n,r,c=Math.pow(10,t);return r=(a(e*c)/c).toFixed(t),i&&(n=new RegExp("0{1,"+i+"}$"),r=r.replace(n,"")),r}function a(e,t,a){return t.indexOf("$")>-1?n(e,t,a):t.indexOf("%")>-1?r(e,t,a):t.indexOf(":")>-1?c(e):o(e._value,t,a)}function i(e,t){var a,i,n,r,c,o=t,l=["KB","MB","GB","TB","PB","EB","ZB","YB"],d=!1;if(t.indexOf(":")>-1)e._value=s(t);else if(t===m)e._value=0;else{for("."!==p[h].delimiters.decimal&&(t=t.replace(/\./g,"").replace(p[h].delimiters.decimal,".")),a=new RegExp("[^a-zA-Z]"+p[h].abbreviations.thousand+"(?:\\)|(\\"+p[h].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+p[h].abbreviations.million+"(?:\\)|(\\"+p[h].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+p[h].abbreviations.billion+"(?:\\)|(\\"+p[h].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+p[h].abbreviations.trillion+"(?:\\)|(\\"+p[h].currency.symbol+")?(?:\\))?)?$"),c=0;c<=l.length&&!(d=t.indexOf(l[c])>-1&&Math.pow(1024,c+1));c++);e._value=(d||1)*(o.match(a)?Math.pow(10,3):1)*(o.match(i)?Math.pow(10,6):1)*(o.match(n)?Math.pow(10,9):1)*(o.match(r)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=d?Math.ceil(e._value):e._value}return e._value}function n(e,t,a){var i,n,r=t.indexOf("$"),c=t.indexOf("("),s=t.indexOf("-"),l="";return t.indexOf(" $")>-1?(l=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(l=" ",t=t.replace("$ ","")):t=t.replace("$",""),n=o(e._value,t,a),1>=r?n.indexOf("(")>-1||n.indexOf("-")>-1?(n=n.split(""),i=1,(c>r||s>r)&&(i=0),n.splice(i,0,p[h].currency.symbol+l),n=n.join("")):n=p[h].currency.symbol+l+n:n.indexOf(")")>-1?((n=n.split("")).splice(-1,0,l+p[h].currency.symbol),n=n.join("")):n=n+l+p[h].currency.symbol,n}function r(e,t,a){var i,n="",r=100*e._value;return t.indexOf(" %")>-1?(n=" ",t=t.replace(" %","")):t=t.replace("%",""),i=o(r,t,a),i.indexOf(")")>-1?((i=i.split("")).splice(-1,0,n+"%"),i=i.join("")):i=i+n+"%",i}function c(e){var t=Math.floor(e._value/60/60),a=Math.floor((e._value-60*t*60)/60),i=Math.round(e._value-60*t*60-60*a);return t+":"+(10>a?"0"+a:a)+":"+(10>i?"0"+i:i)}function s(e){var t=e.split(":"),a=0;return 3===t.length?(a+=60*Number(t[0])*60,a+=60*Number(t[1]),a+=Number(t[2])):2===t.length&&(a+=60*Number(t[0]),a+=Number(t[1])),Number(a)}function o(e,a,i){var n,r,c,s,o,l,d=!1,f=!1,u=!1,v="",b=!1,g=!1,_=!1,z=!1,k=!1,w="",x="",y=Math.abs(e),O=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],F="",N=!1;if(0===e&&null!==m)return m;if(a.indexOf("(")>-1?(d=!0,a=a.slice(1,-1)):a.indexOf("+")>-1&&(f=!0,a=a.replace(/\+/g,"")),a.indexOf("a")>-1&&(b=a.indexOf("aK")>=0,g=a.indexOf("aM")>=0,_=a.indexOf("aB")>=0,z=a.indexOf("aT")>=0,k=b||g||_||z,a.indexOf(" a")>-1?(v=" ",a=a.replace(" a","")):a=a.replace("a",""),y>=Math.pow(10,12)&&!k||z?(v+=p[h].abbreviations.trillion,e/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!k||_?(v+=p[h].abbreviations.billion,e/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!k||g?(v+=p[h].abbreviations.million,e/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!k||b)&&(v+=p[h].abbreviations.thousand,e/=Math.pow(10,3))),a.indexOf("b")>-1)for(a.indexOf(" b")>-1?(w=" ",a=a.replace(" b","")):a=a.replace("b",""),c=0;c<=O.length;c++)if(n=Math.pow(1024,c),r=Math.pow(1024,c+1),e>=n&&r>e){w+=O[c],n>0&&(e/=n);break}return a.indexOf("o")>-1&&(a.indexOf(" o")>-1?(x=" ",a=a.replace(" o","")):a=a.replace("o",""),x+=p[h].ordinal(e)),a.indexOf("[.]")>-1&&(u=!0,a=a.replace("[.]",".")),s=e.toString().split(".")[0],o=a.split(".")[1],l=a.indexOf(","),o?(o.indexOf("[")>-1?(o=o.replace("]",""),o=o.split("["),F=t(e,o[0].length+o[1].length,i,o[1].length)):F=t(e,o.length,i),s=F.split(".")[0],F=F.split(".")[1].length?p[h].delimiters.decimal+F.split(".")[1]:"",u&&0===Number(F.slice(1))&&(F="")):s=t(e,null,i),s.indexOf("-")>-1&&(s=s.slice(1),N=!0),l>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p[h].delimiters.thousands)),0===a.indexOf(".")&&(s=""),(d&&N?"(":"")+(!d&&N?"-":"")+(!N&&f?"+":"")+s+F+(x||"")+(v||"")+(w||"")+(d&&N?")":"")}function l(e,t){p[e]=t}function d(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function f(){return Array.prototype.slice.call(arguments).reduce(function(e,t){var a=d(e),i=d(t);return a>i?a:i},-1/0)}var u,p={},h="en",m=null,v="0,0",b="undefined"!=typeof module&&module.exports;(u=function(t){return u.isNumeral(t)?t=t.value():0===t||void 0===t?t=0:Number(t)||(t=u.fn.unformat(t)),new e(Number(t))}).version="1.5.3",u.isNumeral=function(t){return t instanceof e},u.language=function(e,t){if(!e)return h;if(e&&!t){if(!p[e])throw new Error("Unknown language : "+e);h=e}return(t||!p[e])&&l(e,t),u},u.languageData=function(e){if(!e)return p[h];if(!p[e])throw new Error("Unknown language : "+e);return p[e]},u.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),u.zeroFormat=function(e){m="string"==typeof e?e:null},u.defaultFormat=function(e){v="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||void 0===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var a,i,n=this.length>>>0,r=!1;for(1<arguments.length&&(i=t,r=!0),a=0;n>a;++a)this.hasOwnProperty(a)&&(r?i=e(i,this[a],a,this):(i=this[a],r=!0));if(!r)throw new TypeError("Reduce of empty array with no initial value");return i}),u.fn=e.prototype={clone:function(){return u(this)},format:function(e,t){return a(this,e||v,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:i(this,e||v)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t){return e+a*t}var a=f.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/a,this},subtract:function(e){function t(e,t){return e-a*t}var a=f.call(null,this._value,e);return this._value=[e].reduce(t,this._value*a)/a,this},multiply:function(e){function t(e,t){var a=f(e,t);return e*a*t*a/(a*a)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t){var a=f(e,t);return e*a/(t*a)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(u(this._value).subtract(e).value())}},b&&(module.exports=u),"undefined"==typeof ender&&(this.numeral=u),"function"==typeof define&&define.amd&&define([],function(){return u})}.call(this),jQuery(document).ready(function(e){function t(t){var a=e(t).data("id");return _(t),C[a].price_requested=0,C[a].summary_shown=0,e(t).find(".ezfc-summary-wrapper").fadeOut(),1==C[a].price_show_request?(f(a,!1),!1):(l(t),void k(t))}function a(t,a){e(".ezfc-loading").show();var i=e(t).find(".ezfc-submit-icon");i.fadeIn();var n=e(t).find("input[type='submit']");n.attr("disabled","disabled"),e(t).find(".ezfc-custom-hidden").each(function(){e(this).find("input, :selected").val("__HIDDEN__").addClass("ezfc-has-hidden-placeholder");var t=e(this).find(".ezfc-element-radio:not(:has(:radio:checked))");t.length&&e(t).first().find("input").prop("checked",!0)});var r=e(t).data("id"),c="id="+r+"&"+e(t).serialize();0==C[r].price_requested&&(c+="&price_requested=1"),0==C[r].summary_shown&&(c+="&summary=1"),-1!=a&&(c+="&step="+a),e.ajax({type:"post",url:ezfc_vars.ajaxurl,data:{action:"ezfc_frontend",data:c},success:function(c){if(e(".ezfc-loading").hide(),n.removeAttr("disabled"),i.fadeOut(),"1"==ezfc_vars.debug_mode&&console.log(c),!(c=e.parseJSON(c)))return e(t).find(".ezfc-message").text("Something went wrong. :("),"undefined"!=typeof Recaptcha&&Recaptcha.reload(),h(t,!0),!1;if(c.error){if(h(t,!0),c.id){var s=!0,o="#ezfc_element-"+c.id,l=e(o).find(".ezfc-element").first();e(t).find(".ezfc-step-active").length>0&&parseInt(e(o).parents(".ezfc-step").data("step"))!=a&&-1!=a&&(s=!1,v(t,a+1)),s&&(l.length||(l=e(o)),e(l).opentip(c.error,{delay:800,hideDelay:.1,hideTriggers:["closeButton","target"],removeElementsOnHide:!0,showOn:null,target:o,tipJoint:"middle right"}).show(),b(o))}else e(t).parents(".ezfc-wrapper").find(".ezfc-message").text(c.error).fadeIn().delay(7500).fadeOut();return"undefined"!=typeof Recaptcha&&Recaptcha.reload(),!1}if(c.step_valid)return h(t),v(t,a+1),!1;if(c.summary)return e(t).find(".ezfc-summary-wrapper").fadeIn().find(".ezfc-summary").html(c.summary),C[r].summary_shown=1,h(t),!1;if("undefined"!=typeof Recaptcha&&Recaptcha.reload(),c.paypal)n.attr("disabled","disabled"),window.location.href=c.paypal;else{if(c.price_requested||0===c.price_requested)return void f(r,!0,c.price_requested);if(C[r].reset_after_submission&&1==C[r].reset_after_submission)return m(t),void e(".ezfc-success-text[data-id='"+r+"']").fadeIn().delay(7500).fadeOut();C[r].hide_all_forms&&1==C[r].hide_all_forms?e(".ezfc-form, .ezfc-required-notification").fadeOut():(e(t).fadeOut(),e(t).find(".ezfc-required-notification").fadeOut()),e(".ezfc-success-text[data-id='"+r+"']").fadeIn(),C[r]&&C[r].redirect_url&&C[r].redirect_url.length>0&&(window.location.href=C[r].redirect_url)}}})}function i(t,a,i,n){var r=i.data("value_external");if(r&&e(r).length>0){var c;c=e(r).is("input[type='radio']")?e(r).find(":checked").val():e(r).is("input, input[type='text'], textarea")?e(r).val():e(r).is("select")?e(r).find(":selected").text():e(r).text(),"input"==n||"numbers"==n||"subtotal"==n?i.find("input").val(c):"dropdown"==n?(i.find(":selected").removeAttr("selected"),i.find("option[value='"+c+"']").attr("selected","selected")):"radio"==n?(i.find(":checked").removeAttr("checked"),i.find("input[value='"+c+"']").attr("checked","checked")):"checkbox"==n&&(i.find(":checked").removeAttr("checked"),i.find("input[value='"+c+"']").attr("checked","checked")),O[a][r]||(O[a][r]=1,e(r).on("change keyup",function(){l(e(t))}))}}function n(t,a,i,n){var r=i.data("conditional_action"),c=i.data("conditional_operator"),s=i.data("conditional_target"),o=i.data("conditional_values"),l=i.data("conditional_target_value"),d=i.data("conditional_notoggle"),f=i.data("conditional_redirects");if(r&&0!=r){var u=r.toString().split(","),p=c.toString().split(","),h=s.toString().split(","),m=o.toString().split(","),v=l.toString().split(","),b=d.toString().split(","),g=f.toString().split(","),_=parseFloat(i.val());if("input"==n||"numbers"==n||"subtotal"==n)_=parseFloat(i.find("input").val());else if("dropdown"==n)_=parseFloat(i.find(":selected").data("value"));else if("radio"==n)_=parseFloat(i.find(":checked").data("value"));else if("checkbox"==n)_=0,i.find(":checked").each(function(t,a){_+=parseFloat(e(a).data("value"))});else if("daterange"==n){var k=[e(i).find(".ezfc-element-daterange-from").datepicker("getDate"),e(i).find(".ezfc-element-daterange-to").datepicker("getDate")];_=y(k[0],k[1])}e.each(u,function(r,c){var s;if(!((s="submit_button"==h[r]?e(t).find(".ezfc-submit"):e("#ezfc_element-"+h[r])).length<1&&g.length<1)){var o;o="input"==n?m[r]:parseFloat(m[r]);var l;if("input"==n)l=o.toLowerCase()==s.val().toLowerCase();else{var d=m[r].split(":");switch(p[r]){case"gr":l=_>o;break;case"gre":l=_>=o;break;case"less":l=o>_;break;case"lesse":l=o>=_;break;case"equals":l=_==o;break;case"between":l=!(d.length<2)&&(_>=d[0]&&_<=d[1]);break;case"not":l=d.length<2?_!=o:_<d[0]&&_>d[1];break;case"hidden":l=i.hasClass("ezfc-custom-hidden");break;case"visible":l=!i.hasClass("ezfc-custom-hidden");break;case"mod0":l=_>0&&_%o==0;break;case"mod1":l=_>0&&_%o!=0;break;case"bit_and":l=_&o;break;case"bit_or":l=_|o;break;default:l=!1}}var f,u,k=b[r],w=s.data("element");if("group"==w&&s.push(e(s).find("> .ezfc-custom-element")),"set"==c&&l)"input"==w||"numbers"==w||"subtotal"==w||"set"==w?s.find("input").val(v[r]):"dropdown"==w?(s.find(":selected").removeAttr("selected"),s.find("option[data-value='"+v[r]+"']").prop("selected","selected")):"radio"==w?(s.find(":checked").removeAttr("checked"),s.find("input[data-value='"+v[r]+"']").prop("checked",!0)):"checkbox"==w?s.find("input[data-value='"+v[r]+"']").prop("checked",!0):"checkbox"==w&&s.text(v[r]);else if("activate"==c)l?"submit"==w?s.prop("disabled",!1):s.data("calculate_enabled",1):1!=k&&("submit"==w?s.prop("disabled",!0):s.data("calculate_enabled",0));else if("deactivate"==c)l?"submit"==w?s.prop("disabled",!0):s.data("calculate_enabled",0):1!=k&&("submit"==w&&s.prop("disabled",!1),s.data("calculate_enabled",1));else if("redirect"==c&&l)e(t).parents(".ezfc-wrapper").find(".ezfc-message").text(C[a].redirect_text).fadeIn(),e(t).fadeOut(),setTimeout(function(){window.location.href=g[r]},1e3*C[a].redirect_timer);else{if("show"==c)f="removeClass",u="addClass";else{if("hide"!=c)return;f="addClass",u="removeClass"}l?(s[f]("ezfc-hidden ezfc-custom-hidden"),"show"==c?s.addClass("ezfc-fade-in"):e(s).fadeOut(500,function(){s.removeClass("ezfc-fade-in"),1==C[a].clear_selected_values_hidden&&z()})):1!=k&&(s[u]("ezfc-hidden ezfc-custom-hidden"),"show"==c?s.removeClass("ezfc-fade-in"):s.addClass("ezfc-fade-in"))}}})}}function r(t,a,i,n,r){var c=i.data("calculate_enabled"),s=i.data("calculate_operator")||0,o=i.data("calculate_target")||0,l=i.data("calculate_values")||0,d=i.data("overwrite_price"),f=i.find(".ezfc-element-numbers, .ezfc-element-input-hidden, .ezfc-element-subtotal, .ezfc-element-daterange-container, .ezfc-element-set, .ezfc-element-extension, :selected, :checked, .ezfc-element-custom-calculation");return e(f).each(function(t,a){var f={};if(e(this).data("settings")&&(f=e(this).data("settings")),!e(i).hasClass("ezfc-custom-hidden")||f.hasOwnProperty("calculate_when_hidden")&&0!=f.calculate_when_hidden)if(c&&0!=c||o||l||"subtotal"==n||"hidden"==n||"extension"==n)if(c&&0!=c){var u=parseFloat(e(a).data("factor")),p=e(a).val(),h=parseFloat(p),m=h/100,v=p.indexOf("%")>=0;(!h||isNaN(h))&&(h=0),u&&!isNaN(u)||0===u||(u=1);var b=h;switch(n){case"numbers":case"hidden":case"extension":case"set":b=h*u;break;case"dropdown":case"radio":case"checkbox":b=parseFloat(e(a).data("value")),isNaN(b)&&(b=0);break;case"subtotal":b=r;break;case"daterange":var g=[e(a).find(".ezfc-element-daterange-from").datepicker("getDate"),e(a).find(".ezfc-element-daterange-to").datepicker("getDate")];b=y(g[0],g[1])*u;break;case"custom_calculation":var _=e(i).find(".ezfc-element-custom-calculation").data("function");if(b=parseFloat(window[_](r)),e(i).find(".ezfc-element-custom-calculation-input").val(b),2==ezfc_vars.debug_mode){var z=e(i).find(".ezfc-element-custom-calculation script").text();x("custom_calculation",i,"custom_calculation:\n"+z)}}v&&(b=r*m);var k=s.toString().split(",");if(calc_target_elements=o.toString().split(","),calc_custom_values=l.toString().split(","),k.length>0&&0!=k[0]&&e.each(k,function(t,n){if(n){var c=e("#ezfc_element-"+calc_target_elements[t]);if(c.hasClass("ezfc-custom-hidden"))x("calculate",i,"#"+t+": Skipping this element as it is conditionally hidden.");else{var s,o=calc_custom_values[t];if(c.length>0){var l=c.data("element");if("numbers"==l||"subtotal"==l||"hidden"==l){var f=c.find("input");(!(p=parseFloat(f.data("factor")))||isNaN(p))&&(p=1),s=parseFloat(f.val())*p}else if("dropdown"==l)s=parseFloat(c.find(":selected").data("value"));else if("radio"==l)s=parseFloat(c.find(":checked").data("value"));else if("checkbox"==l)s=0,c.find(":checked").each(function(t,a){s+=parseFloat(e(a).data("value"))});else if("daterange"==l){var u=[e(c).find(".ezfc-element-daterange-from").datepicker("getDate"),e(c).find(".ezfc-element-daterange-to").datepicker("getDate")],p=parseFloat(e(c).find(".ezfc-element-daterange-container").data("factor"));(!p||isNaN(p))&&(p=1),s=y(u[0],u[1])*p}else if("custom_calculation"==l){var m=e(c).find(".ezfc-element-custom-calculation").data("function");s=parseFloat(window[m](o))}}else"0"!=o&&(s=parseFloat(o));switch((!s||isNaN(s))&&(s=0),n){case"add":b+=s;break;case"subtract":b-=s;break;case"multiply":b*=s;break;case"divide":if(0==s)return void x("calculate",i,"#"+t+": Division by 0.");b/=s,"1"==e(a).data("calculate_before")&&(d=1,b=s/h);break;case"equals":b=s;break;case"power":b=Math.pow(b,s);break;case"ceil":b=Math.ceil(b);break;case"floor":b=Math.floor(b);break;case"round":b=Math.round(b);break;case"subtotal":b=r;break;case"log":if(0==s)return;b=Math.log(s);break;case"log2":if(0==s)return;b=Math.log2(s);break;case"log10":if(0==s)return;b=Math.log10(s)}x("calculate",i,"#"+t+": operator = "+n+"\ntarget_value = "+s+"\ncalc_value = "+o+"\naddPrice = "+b)}}else x("calculate",i,"#"+t+": No operator found here.")}),x("calculate",i,"\nprice = "+r+"\naddPrice = "+b+"\nfactor = "+u),"1"==d?r=b:"1"==c&&(r+=b),"subtotal"==n){var w=1==d?r:b,O=2;e(a).data("settings")&&(f=e(a).data("settings"),O=f.precision);var F=w.toFixed(O);i.find("input").val(F)}}else x("calculate",i,"Calculation is disabled.");else x("calculate",i,"No target or values were found to calculate with. Subtotals and hidden elements are skipped.");else x("calculate",i,"Skipped as element is hidden and calculate_when_hidden is not enabled.")}),r}function c(t,a,i,n,r){var c=i.data("discount_range_min"),s=i.data("discount_range_max"),o=i.data("discount_operator"),l=i.data("discount_values");if(l||0==l){var d=c.toString().split(","),f=s.toString().split(","),u=o.toString().split(","),p=l.toString().split(","),h=0,m=1;if("input"==n||"numbers"==n||"subtotal"==n||"hidden"==n||"extension"==n){var v=i.find("input");(m=parseFloat(v.data("factor")))&&!isNaN(m)||0===m||(m=1),h=parseFloat(v.val())}else if("dropdown"==n)h=parseFloat(i.find(":selected").data("value"));else if("radio"==n)h=parseFloat(i.find(":checked").data("value"));else if("checkbox"==n)h=0,i.find(":checked").each(function(t,a){h+=parseFloat(e(a).data("value"))});else if("daterange"==n){var b=[i.find(".ezfc-element-daterange-from").datepicker("getDate"),i.find(".ezfc-element-daterange-to").datepicker("getDate")];h=y(b[0],b[1])}e.each(u,function(t,a){d[t]||0===d[t]||(d[t]=Number.NEGATIVE_INFINITY),f[t]||0===f[t]||(f[t]=Number.POSITIVE_INFINITY);var c;if(h>=parseFloat(d[t])&&h<=parseFloat(f[t])){var s,o=parseFloat(p[t]);switch(a){case"add":r+=c=s=o;break;case"subtract":r-=c=s=o;break;case"percent_add":r=c=r+(s=h*m*(o/100));break;case"percent_sub":r=c=r-(s=h*m*(o/100));break;case"equals":r=c=s=o}"subtotal"!=n||isNaN(c)||e(i).find("input").val(c.toFixed(2)),x("discount",i,"discount = "+s+"\nprice after discount = "+r)}})}return r}function s(t,a,i,n,r){var c=i.data("set_operator"),s=i.data("set_elements");if(s){var o,l=s.toString().split(",");e.each(l,function(t,a){var i=e("#ezfc_element-"+a);if(i){var n=e(i).data("element");if("input"==n||"numbers"==n||"subtotal"==n||"hidden"==n||"extension"==n||"set"==n){var r=i.find("input");factor=parseFloat(r.data("factor")),factor&&!isNaN(factor)||0===factor||(factor=1),el_value=parseFloat(r.val())}else if("dropdown"==n)el_value=parseFloat(i.find(":selected").data("value"));else if("radio"==n)el_value=parseFloat(i.find(":checked").data("value"));else if("checkbox"==n)el_value=0,i.find(":checked").each(function(t,a){el_value+=parseFloat(e(a).data("value"))});else if("daterange"==n){var s=[i.find(".ezfc-element-daterange-from").datepicker("getDate"),i.find(".ezfc-element-daterange-to").datepicker("getDate")];el_value=y(s[0],s[1])}if(0==t)return void(o=el_value);switch(c){case"min":el_value<o&&(o=el_value);break;case"max":el_value>o&&(o=el_value);break;case"avg":case"sum":o+=el_value;break;case"dif":o-=el_value;break;case"prod":o*=el_value;break;case"quot":0!=el_value&&(o/=el_value)}}}),"avg"==c&&(o/=l.length),i.find("input").val(o)}}function o(t){var a=0;return w(),e(t).find(".ezfc-custom-element").each(function(o,l){var d=e(t).data("id"),f=e(l),u=e(l).data("element");e(this).hasClass("ezfc-hidden")&&"subtotal"!=u&&"hidden"!=u&&1==C[d].calculate_old||(i(t,d,f,u),n(t,d,f,u),e(this).hasClass("ezfc-hidden")&&"subtotal"!=u&&"hidden"!=u||(s(t,d,f,u),a=r(t,d,f,u,a),a=c(t,d,f,u,a),n(t,d,f,u)))}),a}function l(t,a){var i=e(t).data("id");return a&&0===a||(price=o(e(t))),u(e(t)),1==C[i].price_show_request&&0==C[i].price_requested?void f(i,!1):(void 0===F[i]&&(F[i]=0),void(F[i]!=price&&(0!=C[i].counter_duration?e(t).find(".ezfc-price-value").countTo({from:F[i],to:price,speed:C[i].counter_duration,refreshInterval:C[i].counter_interval,formatter:function(e,t){return d(i,e)}}):e(t).find(".ezfc-price-value").text(d(i,price)),F[i]=price)))}function d(e,t,a,i){var n=N;return a||C[e].currency,C[e].price_format&&C[e].price_format.length>0&&(n=C[e].price_format),i&&i.length>0&&(n=i),numeral(t).format(n)}function f(t,a,i){var n=e(".ezfc-form[data-id='"+t+"']");a?(F[t]=0,C[t].price_requested=1,l(n,i),k(n)):(C[t].price_requested=0,e(n).find(".ezfc-price-value").text(C[t].price_show_request_before),e(n).find(".ezfc-submit").val(C[t].price_show_request_text))}function u(t){e(t).find("[data-element='subtotal']").each(function(a,i){var n,r,c=e(i).find(".ezfc-element-subtotal"),s=c.val(),o=null;c.data("settings")&&(n=c.data("settings"),o=n.price_format),r=d(e(t).data("id"),s,null,o),e(i).find(".ezfc-text").text(r)})}function p(){e(".ezfc-fixed-price").each(function(){var t=e(this).offset(),a=e(this).data("id"),i=e(".ezfc-form[data-id='"+a+"']"),n=i.outerHeight(),r=i.offset(),c=e(window).scrollTop(),s=parseFloat(C[a].price_position_scroll_top),o=r.top-c-s;0>o&&o>-n&&e(this).offset({top:c+s}),o>0&&t.top>r.top&&e(this).offset({top:r.top})})}function h(t,a){e(t).find(".ezfc-custom-hidden").each(function(){e.each(e(this).find("input, :selected"),function(t,a){e(this).val(e(this).data("index")).removeAttr("disabled")})}),k(t,a)}function m(a){a.find(".ezfc-custom-element").each(function(){var t=e(this).data("element"),a=e(this).find("[data-initvalue]").data("initvalue");switch(t){case"checkbox":e(this).find("input").each(function(){1==e(this).data("initvalue")?e(this).prop("checked",!0):e(this).removeAttr("checked")});break;case"dropdown":e(this).find("option").removeAttr("selected"),e(this).find("option[data-index='"+a+"']").prop("selected",!0);break;case"radio":e(this).find("input").removeAttr("checked"),e(this).find("input[data-initvalue]").prop("checked",!0);break;default:e(this).find("input").val(a)}}),t(a)}function v(t,i,n){var r=parseInt(t.find(".ezfc-step-active").data("step")),c=t.find("[data-step='"+r+"']");return t.data("id"),1==n?(e(t).find(".ezfc-submit-icon").fadeIn(),a(t,i-1),void e(".ezfc-has-hidden-placeholder").val("").removeClass("ezfc-has-hidden-placeholder")):(c.fadeOut(200,function(){var a=t.find("[data-step='"+i+"']");a.fadeIn(200).addClass("ezfc-step-active"),e(this).removeClass("ezfc-step-active"),1==ezfc_vars.auto_scroll_steps&&b(a,200)}),!1)}function b(t,a){var i=e(t).offset().top;e("html, body").animate({scrollTop:i-a})}function g(t,a,i){t||(t=e("#ezfc_element-"+a));var n=t.data("element"),r=t.val(),c=parseFloat(r),s=c/100,o=r?r.indexOf("%")>=0:0;(!c||isNaN(c))&&(c=0);var l=c;switch(n){case"subtotal":case"numbers":case"hidden":case"extension":case"set":var d=t.find("input");(u=parseFloat(d.data("factor")))&&!isNaN(u)||0===u||(u=1),c=parseFloat(d.val()),l=c*u;break;case"dropdown":case"radio":case"checkbox":t.find(":selected, :checked").each(function(){l+=parseFloat(e(this).data("value"))});break;case"daterange":var f=[t.find(".ezfc-element-daterange-from").datepicker("getDate"),t.find(".ezfc-element-daterange-to").datepicker("getDate")],u=parseFloat(t.find(".ezfc-element-daterange-from").data("factor"));u&&!isNaN(u)||0===u||(u=1),l=y(f[0],f[1])*u;break;case"custom_calculation":t.find(".ezfc-element-custom-calculation").data("function"),l=parseFloat(t.find(".ezfc-element-custom-calculation-input").val())}return o&&(l=price*s),isNaN(l)&&(l=0),i?l:l?parseFloat(l):0}function _(t){var a=e(t).data("id");1==C[a].clear_selected_values_hidden&&e(t).find(".ezfc-custom-hidden").each(function(){e(this).find("input[type='text']").val(""),e(this).find(":checkbox, :radio").prop("checked",!1)})}function z(e){var t=e.data("element");"input"==t||"numbers"==t||"subtotal"==t?cond_target.find("input").val(""):"dropdown"==t?cond_target.find(":selected").removeAttr("selected"):("radio"==t||"checkbox"==t)&&cond_target.find(":checked").removeAttr("checked")}function k(t,a){var i=e(t).data("id"),n=C[i].submit_text.default;if(1==C[i].price_show_request&&a)return f(i,!1),!1;if(1==C[i].summary_enabled&&0==C[i].summary_shown)n=C[i].submit_text.summary;else if(1==C[i].use_paypal)n=C[i].submit_text.paypal;else if(1==C[i].use_woocommerce)n=C[i].submit_text.woocommerce;else{var r=!1,c=e(t).find(".ezfc-element-wrapper-payment");c.length>0&&(r="paypal"==e(c).find(":checked").data("value")),n=r?C[i].submit_text.paypal:C[i].submit_text.default}e(t).find(".ezfc-submit").val(n)}function w(){e(".ezfc-debug-info").remove()}function x(t,a,i){2==ezfc_vars.debug_mode&&(console.log(i,a),e(a).append("<pre class='ezfc-debug-info ezfc-debug-type-"+t+"'>["+t+"]\n"+i+"</pre>"))}function y(e,t){return e&&t?(t-e)/1e3/60/60/24:0}ezfc_functions={get_value_from:function(e,t){return g(null,e,t)}};var O=[],F=[];numeral.language("ezfc",{delimiters:{decimal:ezfc_vars.price_format_dec_point,thousands:ezfc_vars.price_format_dec_thousand},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),numeral.language("ezfc");var N=ezfc_vars.price_format?ezfc_vars.price_format:"0,0[.]00";numeral.defaultFormat(N),e.datepicker.setDefaults(e.datepicker.regional[ezfc_vars.datepicker_language]),e(".ezfc-element-option-image").click(function(){if(e(this).hasClass("ezfc-element-radio-image")){var t=e(this).parents(".ezfc-element-wrapper-radio");t.find(".ezfc-selected").removeClass("ezfc-selected"),t.find(".ezfc-element-radio-input").prop("checked",!1).trigger("change"),e(this).siblings(".ezfc-element-radio-input").prop("checked",!0).trigger("change"),e(this).addClass("ezfc-selected")}else if(e(this).hasClass("ezfc-element-checkbox-image")){var a=e(this).siblings(".ezfc-element-checkbox-input");a.prop("checked")?(a.prop("checked",!1).trigger("change"),e(this).removeClass("ezfc-selected")):(a.prop("checked",!0).trigger("change"),e(this).addClass("ezfc-selected"))}});var C=[];e(".ezfc-form").each(function(t){var a=this,i=e(this).data("id");C[i]=e(this).data("vars"),"object"!=typeof C[i]&&(C[i]=e.parseJSON(e(this).data("vars"))),O[i]=[],1==C[i].price_show_request&&f(i,!1),e(this).find(".ezfc-element-datepicker").each(function(){var t={};e(this).data("settings")&&(t=e(this).data("settings")),e(this).datepicker({dateFormat:C[i].datepicker_format,minDate:t.minDate?t.minDate:"",maxDate:t.maxDate?t.maxDate:"",numberOfMonths:t.numberOfMonths?parseInt(t.numberOfMonths):1,showAnim:t.showAnim?t.showAnim:"fadeIn",showWeek:"1"==t.showWeek&&t.showWeek,firstDay:!!t.firstDay&&t.firstDay})}),e(this).find(".ezfc-element-timepicker").each(function(){var t={};e(this).data("settings")&&(t=e(this).data("settings")),e(this).timepicker({minTime:t.minTime?t.minTime:null,maxTime:t.maxTime?t.maxTime:null,step:t.step?t.step:30,timeFormat:t.format?t.format:C[i].timepicker_format})}),e(this).find(".ezfc-element-daterange").each(function(){var t=C[i].datepicker_format,a=e(this);e(this).hasClass("ezfc-element-daterange-from")?e(this).datepicker({dateFormat:t,minDate:e(this).data("mindate"),maxDate:e(this).data("maxdate"),onSelect:function(i){var n=e(this).data("mindays")||0,r=e.datepicker.parseDate(t,i);r.setDate(r.getDate()+n),a.siblings(".ezfc-element-daterange-to").datepicker("option","minDate",r),a.trigger("change")}}):e(this).datepicker({dateFormat:C[i].datepicker_format,minDate:e(this).data("mindate"),maxDate:e(this).data("maxdate"),onSelect:function(i){var n=e(this).data("mindays")||0,r=e.datepicker.parseDate(t,i);r.setDate(r.getDate()-n),a.siblings(".ezfc-element-daterange-from").datepicker("option","maxDate",r),a.trigger("change")}})}),e(this).find(".ezfc-element-colorpicker").each(function(){var t=e(this),a=t.parents(".ezfc-element").find(".ezfc-element-colorpicker-input"),i=t.colorpicker({container:t}).on("changeColor.colorpicker",function(e){t.css("background-color",e.color.toHex()),a.val(e.color.toHex())});e(a).on("click focus",function(){i.colorpicker("show")}).on("change",function(){i.colorpicker("setValue",e(this).val())})});var n=e(this).find(".ezfc-step");if(n.length>0){var r=n.last();e(this).find(".ezfc-summary-wrapper").appendTo(r),e(this).find(".ezfc-submit-wrapper").appendTo(r).addClass("ezfc-submit-step")}e(".ezfc-custom-element[data-group]").each(function(){var t=e(this).data("group"),a=e("#ezfc_element-"+t);a.length>0&&e(this).appendTo(a)}),l(e(this)),"2"==ezfc_vars.debug_mode&&(e(this).append("<button id='ezfc-show-all-elements'>Show/hide elements</button>"),e("#ezfc-show-all-elements").click(function(){return e(this).hasClass("ezfc-debug-visible")?(e(this).removeClass("ezfc-debug-visible"),e(a).find(".ezfc-tmp-visible").removeClass("ezfc-tmp-visible").hide()):(e(this).addClass("ezfc-debug-visible"),e(a).find(".ezfc-hidden").addClass("ezfc-tmp-visible").show().css("display","inline-block")),!1}))}),e(".ezfc-element-fileupload").each(function(t,a){var i=e(this).parents(".ezfc-element"),n=e(i).find(".ezfc-upload-button"),r=e(this).parents("form.ezfc-form"),c={action:"ezfc_frontend_fileupload",data:"id="+r.find("input[name='id']").val()+"&ref_id="+r.find("input[name='ref_id']").val()};e(this).fileupload({formData:c,dataType:"json",add:function(t,r){e(i).find(".ezfc-bar").css("width",0),e(i).find(".progress").addClass("active"),e(i).find(".ezfc-fileupload-message").text(""),n.click(function(){return""!=e(a).val()&&(r.submit(),e(n).attr("disabled","disabled"),t.preventDefault(),!1)})},done:function(t,a){return a.result.error?(e(n).removeAttr("disabled"),e(i).find(".ezfc-fileupload-message").text(a.result.error),e(i).find(".ezfc-bar").css("width",0),!1):(e(this).attr("multiple")&&(e(this).val(""),e(n).removeAttr("disabled")),e(i).find(".progress").removeClass("active"),void e(i).find(".ezfc-fileupload-message").text(ezfc_vars.upload_success))},progressall:function(t,a){var n=parseInt(a.loaded/a.total*100,10);e(i).find(".ezfc-bar").css("width",n+"%")},replaceFileInput:!1,url:ezfc_vars.ajaxurl})}),e(".ezfc-overview").dialog({autoOpen:!1,modal:!0}),e(".ezfc-form input, .ezfc-form select").on("change keyup",function(){t(e(this).parents(".ezfc-form"))}),e(".ezfc-slider").each(function(t,a){var i=e(this),n=e(a).parents(".ezfc-element").find(".ezfc-slider-element");n.slider({min:i.data("min")||0,max:i.data("max")||100,step:i.data("stepsslider")||1,value:i.val()||0,slide:function(e,t){i.val(t.value)},stop:function(e,t){i.trigger("change")}}),i.hasClass("ezfc-pips")&&n.slider("pips",{rest:"label",step:i.data("stepspips")||1}),i.draggable()}),e(".ezfc-spinner").each(function(t,a){var i=e(this);i.spinner({min:i.data("min")||0,max:i.data("max")||100,step:i.data("stepsspinner")||1,change:function(){i.trigger("change")},spin:function(e,t){i.val(t.value),i.trigger("change")}})}),e(".ezfc-step-button").on("click",function(){var t=e(this).parents(".ezfc-form");return v(t,parseInt(t.find(".ezfc-step-active").data("step"))+(e(this).hasClass("ezfc-step-next")?1:-1),e(this).hasClass("ezfc-step-next")?1:0),!1}),e(".ezfc-element-wrapper-payment input").on("change",function(){var t=e(this).parents(".ezfc-form").data("id");if(1!=C[t].price_show_request&&!C[t].summary_enabled){var a="paypal"==e(this).data("value")?C[t].submit_text.paypal:C[t].submit_text.default;e(this).parents(".ezfc-form").find(".ezfc-element-submit").val(a)}}),e(window).scroll(function(){p()}),p(),e(".ezfc-form").submit(function(t){return a(e(this),-1),t.preventDefault(),!1}),e(".ezfc-reset").click(function(){return m(e(this).parents(".ezfc-form")),!1})}),ezfc_functions={};